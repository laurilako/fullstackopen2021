(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var c=t(1),o=t(16),r=t.n(o),a=(t(7),t(6)),i=t(3),u=t(0),s=function(e){var n=e.filter,t=e.onChange;return Object(u.jsx)("form",{children:Object(u.jsxs)("div",{children:["Filter shown contacts with ",Object(u.jsx)("input",{filter:n,onChange:t})]})})},l=function(e){var n=e.persons,t=e.filter,c=e.handleClick;return console.log({persons:n}),Object(u.jsx)("div",{children:t?n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(u.jsxs)("div",{children:[e.name," ",e.number,Object(u.jsx)("button",{value:e.name,onClick:c,children:"delete"})]},e.name)})):n.map((function(e){return Object(u.jsxs)("div",{children:[e.name," ",e.number,Object(u.jsx)("button",{value:e.name,onClick:c,children:"delete"})]},e.name)}))})},d=function(e){var n=e.newName,t=e.newNumber,c=e.onSubmit,o=e.onNumChange,r=e.onNameChange;return Object(u.jsxs)("form",{onSubmit:c,children:[Object(u.jsxs)("div",{children:["Name: ",Object(u.jsx)("input",{value:n,onChange:r})]}),Object(u.jsxs)("div",{children:["Number: ",Object(u.jsx)("input",{value:t,onChange:o})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add name"})})]})},j=t(4),b=t.n(j),f="https://royal-donair-92574.herokuapp.com/api/persons",h={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},create:function(e){return b.a.post(f,e).then((function(e){return e.data}))},remove:function(e){return console.log("id",e),b.a.delete("".concat(f,"/").concat(e))},update:function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))}},m=function(e){var n=e.message,t=e.isError;return""===n?null:""!==n&&!1===t?Object(u.jsx)("div",{className:"message",children:n}):Object(u.jsx)("div",{className:"error",children:n})},O=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],r=Object(c.useState)(""),j=Object(i.a)(r,2),b=j[0],f=j[1],O=Object(c.useState)(""),v=Object(i.a)(O,2),p=v[0],x=v[1],g=Object(c.useState)(""),w=Object(i.a)(g,2),C=w[0],k=w[1],N=Object(c.useState)(""),S=Object(i.a)(N,2),D=S[0],y=S[1],E=Object(c.useState)(!1),A=Object(i.a)(E,2),T=A[0],I=A[1];Object(c.useEffect)((function(){h.getAll().then((function(e){o(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(m,{message:D,isError:T}),Object(u.jsx)(s,{filter:C,onChange:function(e){e.preventDefault(),k(e.target.value)}}),Object(u.jsx)("h2",{children:"Add a new contact"}),Object(u.jsx)(d,{onSubmit:function(e){e.preventDefault();var n={name:b,number:p};if(t.find((function(e){return e.name===b}))){if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var c=t.find((function(e){return e.name===b})),r=c.id,i=Object(a.a)(Object(a.a)({},c),{},{number:p});h.update(r,i).then((function(e){o(t.map((function(n){return n.id!==r?n:e})))})).catch((function(e){y("Information of ".concat(b," has already been removed from server")),I(!0),setTimeout((function(){y(""),I(!0)}),5e3)}))}f(""),x("")}else o(t.concat(n)),h.create(n).then((function(e){o(t.concat(e))})),y("".concat(b," was added to phonebook")),setTimeout((function(){y("")}),5e3),f(""),x("")},newName:b,newNumber:p,onNameChange:function(e){e.preventDefault(),f(e.target.value)},onNumChange:function(e){e.preventDefault(),x(e.target.value)}}),Object(u.jsx)("h2",{children:"Contacts"}),Object(u.jsx)(l,{persons:t,filter:C,handleClick:function(e){e.preventDefault();var n=e.target.value,c=t.find((function(e){return e.name===n})).id;window.confirm("Delete ".concat(n,"?"))&&(h.remove(c).then((function(){o(t.filter((function(e){return e.id!==c})))})),y("".concat(n," was deleted from phonebook")),setTimeout((function(){y("")}),5e3))}})]})};r.a.render(Object(u.jsx)(O,{}),document.getElementById("root"))},7:function(e,n,t){}},[[40,1,2]]]);
//# sourceMappingURL=main.2350364f.chunk.js.map