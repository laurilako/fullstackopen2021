(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(16),o=t.n(r),a=(t(7),t(6)),i=t(3),u=t(0),s=function(e){var n=e.filter,t=e.onChange;return Object(u.jsx)("form",{children:Object(u.jsxs)("div",{children:["Filter shown contacts with ",Object(u.jsx)("input",{filter:n,onChange:t})]})})},d=function(e){var n=e.persons,t=e.filter,c=e.handleClick;return Object(u.jsx)("div",{children:t?n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(u.jsxs)("div",{children:[e.name," ",e.number,Object(u.jsx)("button",{value:e.name,onClick:c,children:"delete"})]},e.name)})):n.map((function(e){return Object(u.jsxs)("div",{children:[e.name," ",e.number,Object(u.jsx)("button",{value:e.name,onClick:c,children:"delete"})]},e.name)}))})},l=function(e){var n=e.newName,t=e.newNumber,c=e.onSubmit,r=e.onNumChange,o=e.onNameChange;return Object(u.jsxs)("form",{onSubmit:c,children:[Object(u.jsxs)("div",{children:["Name: ",Object(u.jsx)("input",{value:n,onChange:o})]}),Object(u.jsxs)("div",{children:["Number: ",Object(u.jsx)("input",{value:t,onChange:r})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add name"})})]})},f=t(4),j=t.n(f),b="http://localhost:3001/api/persons",h={getAll:function(){return j.a.get(b).then((function(e){return e.data}))},create:function(e){return j.a.post(b,e).then((function(e){return e.data}))},remove:function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))}},m=function(e){var n=e.message,t=e.isError;return""===n?null:""!==n&&!1===t?Object(u.jsx)("div",{className:"message",children:n}):Object(u.jsx)("div",{className:"error",children:n})},O=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),f=Object(i.a)(o,2),j=f[0],b=f[1],O=Object(c.useState)(""),v=Object(i.a)(O,2),p=v[0],x=v[1],g=Object(c.useState)(""),w=Object(i.a)(g,2),C=w[0],k=w[1],N=Object(c.useState)(""),S=Object(i.a)(N,2),D=S[0],y=S[1],E=Object(c.useState)(!1),T=Object(i.a)(E,2),A=T[0],I=T[1];Object(c.useEffect)((function(){h.getAll().then((function(e){r(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(m,{message:D,isError:A}),Object(u.jsx)(s,{filter:C,onChange:function(e){e.preventDefault(),k(e.target.value)}}),Object(u.jsx)("h2",{children:"Add a new contact"}),Object(u.jsx)(l,{onSubmit:function(e){e.preventDefault();var n={name:j,number:p};if(t.find((function(e){return e.name===j}))){if(window.confirm("".concat(j," is already added to phonebook, replace the old number with a new one?"))){var c=t.find((function(e){return e.name===j})),o=c.id,i=Object(a.a)(Object(a.a)({},c),{},{number:p});h.update(o,i).then((function(e){r(t.map((function(n){return n.id!==o?n:e})))})).catch((function(e){y("Information of ".concat(j," has already been removed from server")),I(!0),setTimeout((function(){y(""),I(!0)}),5e3)}))}b(""),x("")}else t.find((function(e){return e.name===j}))||(h.create(n).then((function(e){r(t.concat(e)),y("".concat(j," was added to phonebook")),setTimeout((function(){y("")}),5e3),b(""),x("")})).catch((function(e){console.log(e.response.data.error),y("".concat(e.response.data.error)),I(!0),setTimeout((function(){y(""),I(!1)}),5e3)})),b(""),x(""))},newName:j,newNumber:p,onNameChange:function(e){e.preventDefault(),b(e.target.value)},onNumChange:function(e){e.preventDefault(),x(e.target.value)}}),Object(u.jsx)("h2",{children:"Contacts"}),Object(u.jsx)(d,{persons:t,filter:C,handleClick:function(e){e.preventDefault();var n=e.target.value,c=t.find((function(e){return e.name===n})).id;window.confirm("Delete ".concat(n,"?"))&&(h.remove(c).then((function(){r(t.filter((function(e){return e.id!==c})))})),y("".concat(n," was deleted from phonebook")),setTimeout((function(){y("")}),5e3))}})]})};o.a.render(Object(u.jsx)(O,{}),document.getElementById("root"))},7:function(e,n,t){}},[[40,1,2]]]);
//# sourceMappingURL=main.9cffde9e.chunk.js.map